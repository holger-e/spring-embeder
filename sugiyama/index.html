<!DOCTYPE html>
<html>
  <head>
    <title>Graph Drawing Challenge 2018</title>
    <style>
      html, body {
        margin: 0px;
        padding: 0px;
      }

      #exportBox {
        position: fixed;
        top: 10px;
        right: 10px;
      }
    </style>
    <script>
      const CANVAS_ID = "canvas";
      const CANVAS_WIDTH = 1000;
      const CANVAS_HEIGHT = 800;

      window.addEventListener("load", function() {
        // Gets canvas and context.
        let canvas = document.getElementById(CANVAS_ID);
        canvas.width = CANVAS_WIDTH;
        canvas.height = CANVAS_HEIGHT;
        if (!canvas) {
          console.log("Could not find canvas with id " + CANVAS_ID + ".");
        }
        let ctx = canvas.getContext("2d");

        // Initializes embedder.
        let embedder = new GraphEmbedder(ctx);

        let vert1 = new Vertex("Paul Jungeblut", 100, 100);
        let vert2 = new Vertex("Holger Ebhart", 100, 200);
        let vert3 = new Vertex("Karl-Theodor Maria Nikolaus Johann Jacob Philipp Franz Joseph Sylvester Buhl-Freiherr von und zu Guttenberg", 300, 300);
        embedder.addVertex(vert1);
        embedder.addVertex(vert2);
        embedder.addVertex(vert3);

        let dummy1 = new DummyVertex(100, 300);
        embedder.addVertex(dummy1);

        let edge1 = new Edge(vert1, vert2);
        let edge2 = new Edge(vert1, vert3);
        let edge3 = new Edge(vert2, dummy1);
        let edge4 = new Edge(dummy1, vert3);
        embedder.addEdge(edge1);
        embedder.addEdge(edge2);
        embedder.addEdge(edge3);
        embedder.addEdge(edge4);

        // Rendering loop.
        function draw() {
          embedder.draw();
          window.requestAnimationFrame(draw);
        }
        window.requestAnimationFrame(draw);
      });

      function exportImage() {
        let canvas = document.getElementById(CANVAS_ID);
        if (!canvas) {
          console.log("Could not find canvas with id " + CANVAS_ID + ".");
        }
        console.log(canvas.toDataURL());
      }
    </script>
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <div id="exportBox">
      <button onclick="exportImage()">Export</button>
    </div>
    <script src="vertex.js"></script>
    <script src="dummyVertex.js"></script>
    <script src="edge.js"></script>
    <script src="graphEmbedder.js"></script>
  </body>
</html>
